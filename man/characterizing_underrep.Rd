% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/characterizing_underrep.R
\name{characterizing_underrep}
\alias{characterizing_underrep}
\title{Characterize under-represented subgroups (wraps ROOT)}
\usage{
characterizing_underrep(
  DataRCT,
  covariateColName_RCT,
  trtColName_RCT,
  outcomeColName_RCT,
  DataTarget,
  covariateColName_TargetData,
  leaf_proba = 0.25,
  seed = 123,
  num_trees = 10,
  vote_threshold = 2/3,
  explore_proba = 0.05,
  feature_est = "Ridge",
  feature_est_args = list(),
  top_k_trees = FALSE,
  k = 10,
  cutoff = "baseline",
  verbose = FALSE,
  global_objective_fn = objective_default,
  keep_threshold = 0.5,
  lX_threshold = NULL
)
}
\arguments{
\item{DataRCT}{A data frame containing the randomized clinical trial data.
Must include treatment, outcome, and covariate columns.}

\item{covariateColName_RCT}{A character vector of covariate column names in \code{DataRCT}.}

\item{trtColName_RCT}{A character string specifying the treatment column name in \code{DataRCT} (0/1).}

\item{outcomeColName_RCT}{A character string specifying the outcome column name in \code{DataRCT}.}

\item{DataTarget}{A data frame containing the target population data (covariates only).}

\item{covariateColName_TargetData}{A character vector of covariate column names in \code{DataTarget}.}

\item{leaf_proba}{A numeric value for the "leaf" probability in the ROOT tree growth (default 0.25).}

\item{seed}{An integer seed for reproducibility (default 123).}

\item{num_trees}{An integer specifying the number of trees to grow (default 10).}

\item{vote_threshold}{A numeric value (0.5, 1] for the majority vote threshold (default 2/3).}

\item{explore_proba}{A numeric value for exploration probability (default 0.05).}

\item{feature_est}{A string ("Ridge", "GBM") or function for feature importance estimation.}

\item{feature_est_args}{A named list of arguments passed to the feature estimator.}

\item{top_k_trees}{Logical; if TRUE, selects the top k trees instead of using a cutoff.}

\item{k}{Integer; number of trees to select if \code{top_k_trees} is TRUE.}

\item{cutoff}{A numeric value or "baseline" to determine the Rashomon set cutoff.}

\item{verbose}{Logical; if TRUE, prints progress and estimand summaries.}

\item{global_objective_fn}{A function(D) -> numeric to minimize (default \code{objective_default}).}

\item{keep_threshold}{Unused; kept for backward compatibility.}

\item{lX_threshold}{Unused; kept for backward compatibility.}
}
\value{
A \code{characterizing_underrep} object (S3 list) containing:
\item{root}{The resulting \code{ROOT} object.}
\item{combined}{The combined data frame (RCT + Target) used for analysis.}
\item{leaf_summary}{A data frame summarizing the terminal nodes (rules, counts, and labels).}
}
\description{
Combines an RCT (S=1) and a target dataset (S=0), then calls \code{ROOT()} to
learn a weighted tree that identifies subgroups with different representation
in the target population compared to the trial.
}
\examples{
\dontrun{
# Load example data
data(diabetes_data)

# Split into Trial (S=1) and Target (S=0)
trial  <- subset(diabetes_data, S == 1)
target <- subset(diabetes_data, S == 0)

# Run characterization
res <- characterizing_underrep(
  DataRCT = trial,
  covariateColName_RCT = c("Race_Black", "Sex_Male", "DietYes", "Age45"),
  trtColName_RCT = "Tr",
  outcomeColName_RCT = "Y",
  DataTarget = target,
  covariateColName_TargetData = c("Race_Black", "Sex_Male", "DietYes", "Age45"),
  seed = 123
)

# View Summary
summary(res)

# Plot the annotated tree
plot(res)
}
}
