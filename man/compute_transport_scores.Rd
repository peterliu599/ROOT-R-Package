% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/treeBuilding.R
\name{compute_transport_scores}
\alias{compute_transport_scores}
\title{Compute transport influence scores for generalization mode}
\usage{
compute_transport_scores(data, outcome, treatment, sample)
}
\arguments{
\item{data}{A \code{data.frame} containing the outcome, treatment indicator,
sample indicator, and covariates. All columns except \code{outcome},
\code{treatment}, and \code{sample} are treated as covariates \eqn{X}
and must be suitable for use in \code{stats::glm()} with
\code{family = binomial()}.}

\item{outcome}{A length-1 character string giving the name of the outcome
column in \code{data}. Must be numeric (e.g., a continuous outcome or
a 0/1 indicator).}

\item{treatment}{A length-1 character string giving the name of the
treatment indicator column in \code{data}. Must be coded 0/1.}

\item{sample}{A length-1 character string giving the name of the sample
indicator column in \code{data}, with 1 for trial rows and 0 for target
rows.}
}
\value{
A list with two numeric vectors of length \code{nrow(data)}:
\describe{
\item{\code{v}}{The transported influence-style score.}
\item{\code{vsq}}{The element-wise square of \code{v}, i.e., \code{v^2}.}
}
}
\description{
Internal helper used in the \code{generalization} path to construct
glm-based, IPW-style scores for transporting trial effects to a target
population without double machine learning.
}
\details{
The function treats \code{data} as a stacked dataset with a sample
indicator \eqn{S} (\code{sample}) taking value 1 in the randomized trial
and 0 in the target sample. It proceeds in three steps:
\enumerate{
\item Fit a sampling model \eqn{P(S = 1 | X)} using logistic regression
on all rows of \code{data}.
\item Within the trial subset \eqn{S = 1}, fit a treatment model
\eqn{P(T = 1 | X, S = 1)} using logistic regression.
\item For each row, form the density ratio
\eqn{r(X) = P(S = 0 | X) / P(S = 1 | X)}
and compute a Horvitz-Thompson-style transported score
\deqn{v(X, T, Y) = r(X) \left[ \frac{T Y}{e(X)} - \frac{(1 - T) Y}{1 - e(X)} \right],}
where \eqn{e(X) = P(T = 1 | X, S = 1)}.
}

The resulting score vector \code{v} and its squared version \code{vsq}
can be used as pseudo-outcomes for tree-based search over transported
treatment effects.
}
